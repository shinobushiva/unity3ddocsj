<!-- #BeginTemplate "/Templates/manual-page.dwt" --><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">







<html xmlns="http://www.w3.org/1999/xhtml">







<head>







<meta charset="utf-8">







	<!-- #TemplateBeginEditable name="doctitle" -->







		<title>Unity - Execution Order</title>







	<!-- #TemplateEndEditable -->







</head>







<link rel="StyleSheet"  href="../Images/docs.css" type="text/css" />







<body onLoad="DocLoaded();">







<table class="titlebar" cellpadding=0 cellspacing=0 border=0><tr>







	<td class="titleleft"><img src="../images/top/left.png"></td>







	<td><a href="../../Documentation.html"><img src="../images/top/logo.png"></a></td>







	<td class="titlemid">







		<table><tr>







			<td class="doctitle">Execution Order</td>







			<td><table align="right"><tr>







			<!-- #TemplateBeginEditable name="sections-nav" -->







			<td class="Manual"><a href="../Manual/index.html" title="Go to Unity manual" class="scripting-anchor"><img src="../images/spacer.gif" class="manual" border="0"><span class="manual-text">Manual</span></a><span class="docs-navigation">&nbsp;&nbsp;&nbsp;&nbsp;</span></td>







			<td class="Manual"><a href="../Components/index.html" title="Go to Reference" class="scripting-anchor"><img src="../images/spacer.gif" class="reference" border="0"><span class="components-text">Reference</span></a><span class="docs-navigation">&nbsp;&nbsp;&nbsp;&nbsp;</span></td>







			<td class="Manual"><a href="../ScriptReference/index.html" title="Go to Scripting Reference" class="scripting-anchor"><img src="../images/spacer.gif" class="scripting" border="0"><span class="scripting-text">Scripting &nbsp;&nbsp;</span></a></td>







			<!-- #TemplateEndEditable -->	







			</tr></table></td>







		</tr><tr>







			<td colspan="4">







				<table width="100%" class="docpath"><tr><td >







		<!-- #TemplateBeginEditable name="path" -->







					<a href="../Manual/index.html">Unity Manual</a> &gt; <a href="../Manual/Advanced.html">Advanced</a> &gt; <a href="../Manual/Execution Order.html">Execution Order</a>







		<!-- #TemplateEndEditable -->	







				</td>







				</td><td class="switchlink">







					<!-- #TemplateBeginEditable name="switchLink" -->







					<!--BeginSwitchLink--><!--EndSwitchLink-->







					<!-- #TemplateEndEditable -->	







				</td></tr></table>







			</td>







		</tr></table>







	</td>







	<td class="titleright" width="9"><img src="../images/top/right.png"></td>







</tr></table>







<div class="manual">







	<div class="main">















<!-- #TemplateBeginEditable name="unofficial translation" -->
<div id="unofficial_translation"><center><table border="1" ><tr><td  bgcolor="yellow"><center>このドキュメントは有志により翻訳されたもので、オフィシャルではありません。オリジナルのページは<a href="http://unity3d.com/support/documentation/" target="_blank">こちら</a>。<br>This document is unofficially translated by users.Please see the original document <a href="http://unity3d.com/support/documentation/" target="_blank">here</a>.<br><br>翻訳に関する修正など、ご連絡は<a href="mailto:stagesp1@gmail.com">こちら</a>まで。<br>Please send e-mail to <a href="mailto:stagesp1@gmail.com">here</a>, when you have any question about the translation.</center></td>
<!--<td><a href="toedit_proxy.php?url=<replace_here_with_url>"><img src="../Images/pencil.png"/></a><br/>編集</td>-->
</tr></table></center></div>
<!-- #TemplateEndEditable -->

<!-- #TemplateEndEditable -->



<!-- #TemplateEndEditable -->







<!-- #TemplateEndEditable -->







		<!-- #TemplateBeginEditable name="navigation" -->







		<div class="nav">







		<div class="nav-prev">







			<a href='../Manual/Modifying Source Assets Through Scripting.html'>







				<div class="nav-left"></div>







				<div class="nav-main">Previous</div>







				<div class="nav-right"></div>







			</a>







		</div>







	







		<div class="nav-next">







			<a href='../Manual/Optimizing Graphics Performance.html'>







				<div class="nav-left"></div>







				<div class="nav-main">Next</div>







				<div class="nav-right"></div>







			</a>







		</div>







	</div>







		<!-- #TemplateEndEditable -->	







		<!-- #TemplateBeginEditable name="title" -->







			<h1>Execution Order</h1>







		<!-- #TemplateEndEditable -->	







		<!-- #TemplateBeginEditable name="body" -->







			







<p>In Unity scripting, there are a number of event functions that get executed in a predetermined order as a script executes. This execution order is described below:







</p>







<div class='vspace'></div><h1>First Scene Load</h1>







<p>These functions get called when a scene starts (once for each object in the scene).







</p><ul><li><b>Awake:</b> This function is always called before any Start functions and also just after a prefab is instantiated. 







</li><li><b>OnEnable:</b> (only called if the Object is active): This function is called just after the object is enabled.







</li></ul><div class='vspace'></div><h1>Before the first frame update</h1>







<ul><li><b>Start:</b> Start is called before the first frame update only if the script instance is enabled.







</li></ul><div class='vspace'></div><h1>Update Order</h1>







<p>When you're keeping track of game logic and interactions, animations, camera positions, etc., there are a few different events you can use.  The common pattern is to perform most tasks inside the <span class='doc-prop'>Update()</span> function, but there are also other functions you can use.







</p>







<div class='vspace'></div><ul><li><b>FixedUpdate:</b> <span class='doc-prop'>FixedUpdate()</span> is often called more frequently than <span class='doc-prop'>Update()</span>.  It can be called multiple times per frame, if the frame rate is low and it may not be called between frames at all if the frame rate is high.  All physics calculations and updates occur immediately after <span class='doc-prop'>FixedUpdate()</span>.  When applying movement calculations inside <span class='doc-prop'>FixedUpdate()</span>, you do not need to multiply your values by <span class='doc-prop'>Time.deltaTime</span>.  This is because <span class='doc-prop'>FixedUpdate()</span> is called on a reliable timer, independent of the frame rate.







<div class='vspace'></div></li><li><b>Update:</b> <span class='doc-prop'>Update()</span> is called once per frame.  It is the main workhorse function for frame updates.







<div class='vspace'></div></li><li><b>LateUpdate:</b> <span class='doc-prop'>LateUpdate()</span> is called once per frame, after <span class='doc-prop'>Update()</span> has finished.  Any calculations that are performed in <span class='doc-prop'>Update()</span> will have completed when <span class='doc-prop'>LateUpdate()</span> begins.  A common use for <span class='doc-prop'>LateUpdate()</span> would be a following third-person camera.  If you make your character move and turn inside <span class='doc-prop'>Update()</span>, you can perform all camera movement and rotation calculations in <span class='doc-prop'>LateUpdate()</span>.  This will ensure that the character has moved completely before the camera tracks its position.







</li></ul><div class='vspace'></div><h1>Rendering</h1>







<ul><li><b>OnPreCull:</b> Called before the camera culls the scene. Culling determines which objects are visible to the camera. OnPreCull is called just before culling takes place.







</li><li><b>OnBecameVisible/OnBecameInvisible:</b> Called when an object becomes visible/invisible to any camera.







</li><li><b>OnWillRenderObject:</b> Called <b>once</b> for each camera if the object is visible.







</li><li><b>OnPreRender:</b> Called before the camera starts rendering the scene.







</li><li><b>OnRenderObject:</b> Called after all regular scene rendering is done. You can use GL class or Graphics.DrawMeshNow to draw custom geometry at this point.







</li><li><b>OnPostRender:</b> Called after a camera finishes rendering the scene.







</li><li><b>OnRenderImage(Pro only):</b> Called after scene rendering is complete to allow postprocessing of the screen image.







</li><li><b>OnGUI:</b> Called multiple times per frame in response to GUI events. The Layout and Repaint events are processed first, followed by a Layout and keyboard/mouse event for each input event.







</li><li><b>OnDrawGizmos</b> Used for drawing Gizmos in the scene view for visualisation purposes.







</li></ul><div class='vspace'></div><h1>Coroutine</h1>







<p>Normal coroutine updates are run after the Update function returns. A coroutine is function that can suspend its execution (yield) until the given given YieldInstruction finishes.







Different uses of Coroutines:







</p><ul><li><b>yield;</b> The coroutine will continue after all Update functions have been called on the next frame.







</li><li><b>yield WaitForSeconds(2);</b> Continue after a specified time delay, after all Update functions have been called for the frame







</li><li><b>yield WaitForFixedUpdate();</b> Continue after all FixedUpdate has been called on all scripts







</li><li><b>yield WWW</b> Continue after a WWW download has completed.







</li><li><b>yield StartCoroutine(MyFunc);</b> Chains the coroutine, and will wait for the MyFunc coroutine to complete first.







</li></ul><div class='vspace'></div><h1>When Quitting</h1>







<p>These functions get called on all the active objects in your scene, :







</p><ul><li><b>OnApplicationQuit:</b> This function is called on all game objects before the application is quit. In the editor it is called when the user stops playmode. In the web player it is called when the web view is closed.







</li><li><b>OnDisable:</b> This function is called when the behaviour becomes disabled or inactive.







</li></ul><div class='vspace'></div><h3>So in conclusion, this is the execution order for any given script:</h3>







<ul><li>All Awake calls 







</li><li>All Start Calls 







</li><li><b>while</b> (stepping towards variable delta time)







<ul><li>All FixedUpdate functions 







</li><li>Physics simulation 







</li><li>OnEnter/Exit/Stay trigger functions 







</li><li>OnEnter/Exit/Stay collision functions 







</li></ul><div class='vspace'></div></li><li>Rigidbody interpolation applies transform.position and rotation 







</li><li>OnMouseDown/OnMouseUp etc. events 







</li><li>All Update functions 







</li><li>Animations are advanced, blended and applied to transform 







</li><li>All LateUpdate functions 







</li><li>Rendering







</li></ul><div class='vspace'></div><h1>Hints</h1>







<ul><li>If you start a coroutine in LateUpdate it will also be called after LateUpdate just before rendering. 







</li><li>Coroutines are executed after all Update functions.







</li></ul>







</p><small>Page last updated: 2010-11-03</p>







    <script type="text/javascript">























    var allHTMLTags = new Array();







    document.divs = new Array();















    function getElementByClass(theClass) {















	    var allHTMLTags=document.getElementsByTagName("*");















	    for (var i=0; i<allHTMLTags.length; i++) {















		    if (allHTMLTags[i].className==theClass) {







			    return true;







		    }







	    }







	    return false;







    }















    function ShowHideDiv(containerName, className, content){







	var container = document.getElementById(containerName);







	if(container == null)







		return;







	if(content == '') {//In case there are no divs in the page we still can change the icons.







		if(containerName == 'desktopRef') {







			if(container.innerHTML == "<img src=\"../Images/DesktopNO.png\" alt=\"\">") {







				container.innerHTML = "<img src=\"../Images/DesktopYES.png\" alt=\"\">";







				SetCookie(containerName, 'set', 30);







			} else {







				container.innerHTML = "<img src=\"../Images/DesktopNO.png\" alt=\"\">";







				UnSetCookie(containerName);







			}







		}







		if(containerName == 'iosRef') {







			if(container.innerHTML == "<img src=\"../Images/iPhoneNO.png\" alt=\"\">") {







				container.innerHTML = "<img src=\"../Images/iPhoneYES.png\" alt=\"\">";







				SetCookie(containerName, 'set', 30);







			} else {







				container.innerHTML = "<img src=\"../Images/iPhoneNO.png\" alt=\"\">";







				UnSetCookie(containerName);







			}







		}







		if(containerName == 'androidRef') {







			if(container.innerHTML == "<img src=\"../Images/AndroidNO.png\" alt=\"\">") {







				container.innerHTML = "<img src=\"../Images/AndroidYES.png\" alt=\"\">";







				SetCookie(containerName, 'set', 30);







			} else {







				container.innerHTML = "<img src=\"../Images/AndroidNO.png\" alt=\"\">";







				UnSetCookie(containerName);







			}	







		}







	} else {







		if(container.innerHTML == "<h1><img src=\"../Images/PlatformArrowRight.png\" alt=\"\"> " + content + "</h1>") {







		container.innerHTML = "<h1><img src=\"../Images/PlatformArrowDown.png\" alt=\"\">" + content + "</h1>";







			SetCookie(containerName, 'set', 30);







		} else {







			container.innerHTML = "<h1><img src=\"../Images/PlatformArrowRight.png\" alt=\"\">" + content + "</h1>";







			UnSetCookie(containerName);







		}







	}







	for(var i = 0; i < document.divs.length; i++) {







		var divClassName = document.divs[i];







		var matched = false;







		if(divClassName.className == className)







			   matched = true;







		if(matched) {







			







			if(divClassName != null) {







				if (divClassName.style.display == 'block') {







					divClassName.style.display = 'none';







					if(content == '') {







						if(className == 'specific-desktop')







							container.innerHTML = "<img src=\"../Images/DesktopNO.png\" alt=\"\" />";







						if(className == 'specific-ios')







							container.innerHTML = "<img src=\"../Images/iPhoneNO.png\" alt=\"\" />";







						if(className == 'specific-android')







							container.innerHTML = "<img src=\"../Images/AndroidNO.png\" alt=\"\" />";







					} else {







						container.innerHTML = "<h1><img src=\"../Images/PlatformArrowRight.png\" alt=\"\" /> " + content + "</h1>";







					}







					UnSetCookie(containerName);







				} else {







					divClassName.style.display = 'block';







					if(content == '') {







						if(className == 'specific-desktop')







							container.innerHTML = "<img src=\"../Images/DesktopYES.png\" alt=\"\" />";







						if(className == 'specific-ios')







							container.innerHTML = "<img src=\"../Images/iPhoneYES.png\" alt=\"\" />";







						if(className == 'specific-android')







							container.innerHTML = "<img src=\"../Images/AndroidYES.png\" alt=\"\" />";







					} else {







						container.innerHTML = "<h1><img src=\"../Images/PlatformArrowDown.png\" alt=\"\" /> " + content + "</h1>";







					}







					SetCookie(containerName, 'set', 30);







				}







			}







		}	







        }			   







    }







    function UnSetCookie(cn) {







    	SetCookie(cn,'',30);







    }















    function GetCookie(cName) {







	if (document.cookie.length > 0) {







            cStart = document.cookie.indexOf(cName + "=");







	    if(cStart != -1) {







	        cStart = cStart + cName.length + 1;







	        cEnd = document.cookie.indexOf(";", cStart);







	        if (cEnd == -1) {







	            cEnd = document.cookie.length;







	        }







	        return unescape(document.cookie.substring(cStart, cEnd));;







	    }







	}







	return "";







    }















    function SetCookie(cName, value, expireDays) {







	var exDate = new Date();







	exDate.setDate(exDate.getDate()+expireDays);







	document.cookie = cName + "=" + escape(value) + ((expireDays ==null) ? "" : ";expires=" + exDate.toGMTString()) + ";path=/";







    }















    function DocLoaded() {







	document.divs = document.getElementsByTagName('div');







	var prefDesktop = GetCookie('desktopRef');







	var prefiOS = GetCookie('iosRef');







	var prefAndroid = GetCookie('androidRef');







	var firstTime = GetCookie('FT');







	if (firstTime == null || firstTime == "" ) {







	    SetCookie('FT', 'no', 30);







	    SetCookie('desktopRef', 'set', 30)







	} else if (prefDesktop == null || prefDesktop =="") {







	    if(getElementByClass('desktopRefIMG')) {







	        ShowHideDiv('desktopRef','specific-desktop','');







	    } else {







	        ShowHideDiv('desktopRef','specific-desktop','Desktop');







	    }







	}







	if (prefiOS == null || prefiOS =="") {







	    if(getElementByClass('iosRefIMG')) {







	        ShowHideDiv('iosRef','specific-ios','');







	    } else {







	        ShowHideDiv('iosRef','specific-ios','iOS');







	    }







	}







	if (prefAndroid == null || prefAndroid =="") {







	    if(getElementByClass('androidRefIMG')) {







	        ShowHideDiv('androidRef','specific-android','');







	    } else {







	        ShowHideDiv('androidRef','specific-android','Android');







	    }







	}	







    }







    </script>







    







		<!-- #TemplateEndEditable -->	















		<div class="nav">







		<div class="nav-prev">







			<a href='../Manual/Modifying Source Assets Through Scripting.html'>







				<div class="nav-left"></div>







				<div class="nav-main">Previous</div>







				<div class="nav-right"></div>







			</a>







		</div>







	







		<div class="nav-next">







			<a href='../Manual/Optimizing Graphics Performance.html'>







				<div class="nav-left"></div>







				<div class="nav-main">Next</div>







				<div class="nav-right"></div>







			</a>







		</div>







	</div>







	</div>







</div>







</body></html>







<!-- #EndTemplate -->







