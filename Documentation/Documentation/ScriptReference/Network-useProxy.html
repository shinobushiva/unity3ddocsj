<!-- #BeginTemplate "/Templates/manual-scriptref-page.dwt" --><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8">
	<!-- #TemplateBeginEditable name="doctitle" -->
			<title>Unity Script Reference &ndash; Network.useProxy</title>
	<!-- #TemplateEndEditable -->
<link rel="StyleSheet"  href="docs.css" type="text/css" />
<script type="text/javascript" src="../Images/jquery-1.4.2.js"></script>
<script type="text/javascript" src="../Images/jquery.cookie.js"></script>

<style>
/* 
Unity standard fonts 
*/
body{ font-family:Helvetica, Arial, sans-serif; font-size:.9em; }

/*
simple format for code, using fixed width
and a nice border
*/
pre { font-family:"Courier New", Courier, monospace; font-size:.8em; }
pre { padding:10px; margin:10px; border:1px #d8d8d8 solid; }
pre { -moz-border-radius:10px; -webkit-border-radius:10px; }
pre { background:#f8f8f8; }

/*
aligns the selection dialog on the top right
*/
.selectLang { margin-right:10px; text-align:right; float:right; }


.cSelect,
.cSelect ul,
.cSelect li { font-size:12px; }

/*.cSelect { border:1px solid #d0d0d0; }
.cSelect { background:#ddf; }*/
/*
.cSelect { -moz-border-radius:10px; -webkit-border-radius:10px; }*/

.cSelect { display:inline-block; position:relative; float:right; margin-right:20px;}
.cSelect { padding-top:.4em; padding-bottom:.2em;}
.cSelect-Selected,
.cSelect-ArrowDown,
.cSelect li { cursor:pointer; }

.cSelect,
.roundTop { -webkit-border-top-left-radius:10px; -webkit-border-top-right-radius:10px; }
.cSelect,
.roundTop { -moz-border-radius-topleft:10px; -moz-border-radius-topright:10px; }

.roundBottom,
.cSelect ul { -webkit-border-bottom-left-radius:10px; -webkit-border-bottom-right-radius:10px; }
.roundBottom,
.cSelect ul { -moz-border-radius-bottomleft:10px; -moz-border-radius-bottomright:10px; }


.cSelectWidth { width:10em; display:block;}

.cSelect-wrapper { position:relative; }

.cSelect ul { background:#fff; padding:0px; margin:0px; display:inline-block; }
.cSelect ul { z-index:10; position:absolute; top:1.3em; }
.cSelect ul { padding-bottom:.5em; padding-top:.5em; padding-left:0px; padding-right:0px; }
/*.cSelect ul { border:1px solid #d0d0d0; }*/


.cSelect li { padding:.1em; margin:0px; text-align:right; list-style-type:none; }
.cSelect li { padding-left:.7em; padding-right:24px; }

.cSelect-highlight { background:#f0f0f0; }

.cSelect-Selected { margin-left:.5em; margin-right:.5em; text-align:right; float:right; width:75%}

.cSelect-ArrowDown { width:18px; height:18px; display:inline-block; float:right}
.cSelect-ArrowDown { background:url('../Images/down-arrow.png'); text-align:center; }
.cSelect-ArrowDown { -moz-border-radius:9px; -webkit-border-radius:9px; }

.monoCompatibility-roweven { background-color:#DCDDDF; }
.monoCompatibility-rowodd { background-color:#F3F3F4; }
.monoCompatibility-cell { border:1px solid #ffffff;}


</style>
</head>

<body>


<table class="titlebar" cellpadding=0 cellspacing=0 border=0><tr>
	<td class="titleleft"><img src="../images/top/left.png"></td>
	<td><a href="../../Documentation.html"><img src="../images/top/logo.png"></a></td>
	<td class="titlemid">
		<table><tr>
			<td class="doctitle"><a href='Network.html' class='classlink' title='Go to Network scripting documentation'>Network</a>.useProxy</td>
			<!-- #TemplateBeginEditable name="sections-nav" -->
			<td class="Scripting"><a href="../Manual/index.html" title="Go to Unity manual" class="scripting-anchor"><img src="../images/spacer.gif" class="manual" border="0"><span class="manual-text">Manual</span></a><span class="docs-navigation">&nbsp;&nbsp;&nbsp;&nbsp;</span></td>
			<td class="Scripting"><a href="../Components/index.html" title="Go to Reference" class="scripting-anchor"><img src="../images/spacer.gif" class="reference" border="0"><span class="components-text">Reference</span></a><span class="docs-navigation">&nbsp;&nbsp;&nbsp;&nbsp;</span></td>
			<td class="Scripting"><a href="../ScriptReference/index.html" title="Go to Scripting Reference" class="scripting-anchor"><img src="../images/spacer.gif" class="scripting" border="0"><span class="scripting-text">Scripting&nbsp;&nbsp;</span></a></td>
			<!-- #TemplateEndEditable -->	
		</tr><tr>
			<td colspan="4">
				<table width="100%" class="docpath"><tr><td >
					<!-- #TemplateBeginEditable name="path" -->
						<a href="index.html">Scripting</a> &gt <a href='20_class_hierarchy.html'>Runtime Classes</a> &gt <a href='Network.html'>Network</a>
					<!-- #TemplateEndEditable -->	
				</td>
				</td><td class="switchlink">
					<!-- #TemplateBeginEditable name="switchLink" -->
					<!--BeginSwitchLink--><!--EndSwitchLink-->
					<!-- #TemplateEndEditable -->	
				</td></tr></table>
			</td>
		</tr></table>
	</td>
	<td class="titleright" width="9"><img src="../images/top/right.png"></td>
</tr></table>
<div class="scriprefmain">
		<span class="heading">
			<!-- #TemplateBeginEditable name="title" -->
				<a href='Network.html' class='classlink' title='Go to Network scripting documentation'>Network</a>.useProxy
			<!-- #TemplateEndEditable -->	
		</span>
<!-- #TemplateBeginEditable name="details" -->
	<span class="text"></span>
<!-- #TemplateEndEditable -->	

	<!-- #TemplateBeginEditable name="manual-top-nav" --><div class="left-menu-container"><ul class="left-menu"><li>
<form class="apisearch" action="30_search.html" method="GET">
	<input type="search" name="q" placeholder="Search" autosave="Unity Reference" results="5" class="sbox" id="q" />
				
	<script type="text/javascript" language="JavaScript">
	<!--
	function detect() {
		// simplify things
		var agent 	= navigator.userAgent.toLowerCase();
		
		// detect platform
		this.isMac		= (agent.indexOf('mac') != -1);
		this.isWin		= (agent.indexOf('win') != -1);
		this.isWin2k	= (this.isWin && (
				agent.indexOf('nt 5') != -1));
		this.isWinSP2	= (this.isWin && (
				agent.indexOf('xp') != -1 || 
				agent.indexOf('sv1') != -1));
		this.isOther	= (
				agent.indexOf('unix') != -1 || 
				agent.indexOf('sunos') != -1 || 
				agent.indexOf('bsd') != -1 ||
				agent.indexOf('x11') != -1 || 
				agent.indexOf('linux') != -1);
		
		// detect browser
		this.isSafari	= (agent.indexOf('safari') != -1);
		this.isSafari2 = (this.isSafari && (parseFloat(agent.substring(agent.indexOf("applewebkit/")+"applewebkit/".length,agent.length).substring(0,agent.substring(agent.indexOf("applewebkit/")+"applewebkit/".length,agent.length).indexOf(' '))) >=  300));
		this.isOpera	= (agent.indexOf('opera') != -1);
		this.isNN		= (agent.indexOf('netscape') != -1);
		this.isIE		= (agent.indexOf('msie') != -1);
	}
	var browser = new detect();
	var str = "Search";
	var q=document.getElementById('q');
	if (!browser.isSafari2) {q.value=str;q.onfocus=function(){q.value="";q.style.color="#000";};}
	//-->
	</script>
</form>
</li><li><span class="left-menu-heading">Menu</span></li><li><a title="Scripting overview" class="left-menu-item" href="index.html">Overview</a></li><li><a title="List of scripting classes" class="left-menu-item" href="20_class_hierarchy.html">Runtime Classes</a></li><li><a title="List of attributes" class="left-menu-item left-menu-indent" href="20_class_hierarchy.Attributes.html">Attributes</a></li><li><a title="List of enumerations" class="left-menu-item left-menu-indent" href="20_class_hierarchy.Enumerations.html">Enumerations</a></li><li><a title="Classes for extending Unity editor" class="left-menu-item" href="20_class_hierarchy.Editor_Classes.html">Editor Classes</a></li><li><a title="List of editor enumerations" class="left-menu-item left-menu-indent" href="20_class_hierarchy.Editor_Enumerations.html">Enumerations</a></li><li><a title="Scripting change history" class="left-menu-item" href="40_history.html">History</a></li><li><a title="Alphabetical index" class="left-menu-item" href="10_reference.html">Index</a></li><li><span class="left-menu-seperator"></span></li><li><a class="left-menu-heading" href="Network.html">Network</a></li><li><a class="left-menu-item" href="Network.html">All Members</a></li><li><span class="left-menu-subheading">Messages Sent</span></li><li><a class="left-menu-item" href="Network.OnConnectedToServer.html">OnConnectedToServer</a></li><li><a class="left-menu-item" href="Network.OnDisconnectedFromServer.html">OnDisconnectedFromServer</a></li><li><a class="left-menu-item" href="Network.OnFailedToConnect.html">OnFailedToConnect</a></li><li><a class="left-menu-item" href="Network.OnFailedToConnectToMasterServer.html">OnFailedToConnectToMasterServer</a></li><li><a class="left-menu-item" href="Network.OnNetworkInstantiate.html">OnNetworkInstantiate</a></li><li><a class="left-menu-item" href="Network.OnPlayerConnected.html">OnPlayerConnected</a></li><li><a class="left-menu-item" href="Network.OnPlayerDisconnected.html">OnPlayerDisconnected</a></li><li><a class="left-menu-item" href="Network.OnSerializeNetworkView.html">OnSerializeNetworkView</a></li><li><a class="left-menu-item" href="Network.OnServerInitialized.html">OnServerInitialized</a></li><li><span class="left-menu-subheading">Class Variables</span></li><li><a class="left-menu-item" href="Network-connections.html">connections</a></li><li><a class="left-menu-item" href="Network-connectionTesterIP.html">connectionTesterIP</a></li><li><a class="left-menu-item" href="Network-connectionTesterPort.html">connectionTesterPort</a></li><li><a class="left-menu-item" href="Network-incomingPassword.html">incomingPassword</a></li><li><a class="left-menu-item" href="Network-isClient.html">isClient</a></li><li><a class="left-menu-item" href="Network-isMessageQueueRunning.html">isMessageQueueRunning</a></li><li><a class="left-menu-item" href="Network-isServer.html">isServer</a></li><li><a class="left-menu-item" href="Network-logLevel.html">logLevel</a></li><li><a class="left-menu-item" href="Network-maxConnections.html">maxConnections</a></li><li><a class="left-menu-item" href="Network-minimumAllocatableViewIDs.html">minimumAllocatableViewIDs</a></li><li><a class="left-menu-item" href="Network-natFacilitatorIP.html">natFacilitatorIP</a></li><li><a class="left-menu-item" href="Network-natFacilitatorPort.html">natFacilitatorPort</a></li><li><a class="left-menu-item" href="Network-peerType.html">peerType</a></li><li><a class="left-menu-item" href="Network-player.html">player</a></li><li><a class="left-menu-item" href="Network-proxyIP.html">proxyIP</a></li><li><a class="left-menu-item" href="Network-proxyPassword.html">proxyPassword</a></li><li><a class="left-menu-item" href="Network-proxyPort.html">proxyPort</a></li><li><a class="left-menu-item" href="Network-sendRate.html">sendRate</a></li><li><a class="left-menu-item" href="Network-time.html">time</a></li><li><span class="left-menu-item left-menu-current">useProxy</span></li><li><span class="left-menu-subheading">Class Functions</span></li><li><a class="left-menu-item" href="Network.AllocateViewID.html">AllocateViewID</a></li><li><a class="left-menu-item" href="Network.CloseConnection.html">CloseConnection</a></li><li><a class="left-menu-item" href="Network.Connect.html">Connect</a></li><li><a class="left-menu-item" href="Network.Destroy.html">Destroy</a></li><li><a class="left-menu-item" href="Network.DestroyPlayerObjects.html">DestroyPlayerObjects</a></li><li><a class="left-menu-item" href="Network.Disconnect.html">Disconnect</a></li><li><a class="left-menu-item" href="Network.GetAveragePing.html">GetAveragePing</a></li><li><a class="left-menu-item" href="Network.GetLastPing.html">GetLastPing</a></li><li><a class="left-menu-item" href="Network.HavePublicAddress.html">HavePublicAddress</a></li><li><a class="left-menu-item" href="Network.InitializeSecurity.html">InitializeSecurity</a></li><li><a class="left-menu-item" href="Network.InitializeServer.html">InitializeServer</a></li><li><a class="left-menu-item" href="Network.Instantiate.html">Instantiate</a></li><li><a class="left-menu-item" href="Network.RemoveRPCs.html">RemoveRPCs</a></li><li><a class="left-menu-item" href="Network.RemoveRPCsInGroup.html">RemoveRPCsInGroup</a></li><li><a class="left-menu-item" href="Network.SetLevelPrefix.html">SetLevelPrefix</a></li><li><a class="left-menu-item" href="Network.SetReceivingEnabled.html">SetReceivingEnabled</a></li><li><a class="left-menu-item" href="Network.SetSendingEnabled.html">SetSendingEnabled</a></li><li><a class="left-menu-item" href="Network.TestConnection.html">TestConnection</a></li><li><a class="left-menu-item" href="Network.TestConnectionNAT.html">TestConnectionNAT</a></li></ul></div>
	<!-- #TemplateEndEditable -->
<!-- #TemplateBeginEditable name="unofficial translation" -->
<div id="unofficial_translation"><center><table border="1" ><tr><td  bgcolor="yellow"><center>このドキュメントは有志により翻訳されたもので、オフィシャルではありません。オリジナルのページは<a href="http://unity3d.com/support/documentation/" target="_blank">こちら</a>。<br>This document is unofficially translated by users.Please see the original document <a href="http://unity3d.com/support/documentation/" target="_blank">here</a>.<br><br>翻訳に関する修正など、ご連絡は<a href="mailto:stagesp1@gmail.com">こちら</a>まで。<br>Please send e-mail to <a href="mailto:stagesp1@gmail.com">here</a>, when you have any question about the translation.</center></td>
<td><a href="https://github.com/shinobushiva/unity3ddocsj"><img src="../Images/pencil.png"/></a><br/>編集 (GitHub)</td>
</tr></table></center></div>
<!-- #TemplateEndEditable -->


			<!-- #TemplateBeginEditable name="body" -->
			<div class="manual-entry"><h3><span class="hl-keyword">static</span> <span class="hl-keyword">var</span> useProxy : <span class="hl-datatype">bool</span>
</h3><h3 class="soft">Description</h3>
   <p class="details"> Indicate if proxy support is needed, in which case traffic is relayed through the proxy server.</p>
   <p class="details"> 
The proxy server is a solution to connectivity problems with servers
as well as clients. When a machine has an non NAT punchthrough capable
router his connectivity options are limited. A game cannot be hosted
as nobody external can connect to him (only clients on the local network can).
By using the proxy server the machine can be fully connectable but with
the extra cost of having all traffic relayed through another server.
A non NAT punchthrough capable client can connect to any server through 
the proxy server, as long as the proxy server is set up properly.
</p><p class="details">
Unity Technologies does not provide a proxy server for public use, so to
use this feature you will need to set up your own proxy server. Of course
it is advisable to set up a proxy server with a public IP address and
a lot of available bandwidth.
</p><p class="details">
When running as a client, just enabling <a href="Network-useProxy.html" class="itemlink">Network.useProxy</a> is all you have
to do. Connect to the server as usual with <a href="Network.Connect.html" class="itemlink">Network.Connect</a>(). All traffic 
will be relayed through the proxy server. The servers external IP and internal
IP still work as usual. So clients can connect to him directly without
the proxy in case they are located on the same network.
</p><p class="details">
When running as a server OnServerInitialized(NetworkPlayer) returns a
NetworkPlayer structure which indicates what the game servers relayed
IP/port is, i.e. what port the proxy server allocated to the game server. 
This is the IP/port others can use to connect to. When connecting to the
server, the clients don't treat the server any differently than other servers.
Technically speaking, they don't need to know at all that the game server
is getting help from a proxy server. 
</p><p class="details">
When using the master server you can no longer only rely on the IP/port he
registers for servers when using proxy support. The proxy server IP address
and port which the server is using can be placed in the comment field of
the data sent to the master server. A client which received host information
from the master server can peek into the comment field and find out if
he can use an alternative IP/port for that host.
</p><p class="details">
IMPORTANT: You should never enable proxy support for both the server and
the client connecting to him. Unexpected things are bound to happen.
</p><p class="details">
<div class="example">
  <div style="clear:both;">
    <div class="cSelect cSelectWidth roundBottom">
      <div class="cSelect-wrapper">
        <div class="cSelect-ArrowDown"></div>
	 <span class="cSelect-Selected">
	 JavaScripts
	 </span>
	 <ul class="cSelectWidth" style="display:none;">
		<li>JavaScript</li>
		<li>C#</li>
		<li>Boo</li>
	 </ul>
      </div>
    </div>
    <div style="clear:both;"></div>
  </div>
<div class="code" code_lang_name="JavaScript"><span class="hl-keyword">var</span> imaserver: boolean;<br/><span class="hl-keyword">var</span> serverIP: <span class="hl-datatype"><a href="String.html" class="classlink">String</a></span>;<br/><span class="hl-keyword">var</span> serverPort: <span class="hl-datatype">int</span>;<br/><span class="hl-keyword">var</span> serverUsesNAT: boolean;<br/><br/><span class="hl-keyword">function</span> <span class="hl-operator">Awake</span>() {<br/>    <span class="hl-comment">// Set custom proxy server address</span><span class="hl-comment"><br/></span>    <a href="Network-proxyIP.html" class="itemlink">Network.proxyIP</a> = <span class="hl-string">"1.1.1.1"</span>;<br/>    <a href="Network-proxyPort.html" class="itemlink">Network.proxyPort</a> = 1111;<br/><br/>    <span class="hl-keyword">if</span> (imaserver)<br/>        StartServerWithProxy();<br/>    <span class="hl-keyword">else</span><br/>        ConnectToServerWithProxy();<br/>}<br/><br/><span class="hl-keyword">function</span> StartServerWithProxy() {<br/>    <a href="Network-useProxy.html" class="itemlink">Network.useProxy</a> = true;<br/>    <a href="Network.InitializeServer.html" class="itemlink">Network.InitializeServer</a>(2,25000, <span class="hl-keyword">false</span>);<br/>}<br/><br/><span class="hl-keyword">function</span> OnServerInitialized(player: <a href="NetworkPlayer.html" class="classlink">NetworkPlayer</a>) {<br/>    <span class="hl-keyword">if</span> (<a href="Network-useProxy.html" class="itemlink">Network.useProxy</a>)<br/>        <a href="Debug.Log.html?from=Network" class="itemlink">Debug.Log</a> (<span class="hl-string">"Successfully started server with proxy support. We are connectable through "</span><br/>            + player.ipAddress + <span class="hl-string">":"</span> + player.port);<br/>}<br/><br/><span class="hl-keyword">function</span> OnFailedToConnect(msg: <a href="NetworkConnectionError.html" class="classlink">NetworkConnectionError</a>) {<br/>    <span class="hl-keyword">if</span> (<a href="Network-useProxy.html" class="itemlink">Network.useProxy</a> &amp;&amp; imaserver) {<br/>        <a href="Debug.LogError.html?from=Network" class="itemlink">Debug.LogError</a>(<span class="hl-string">"Failed to connect to proxy server: "</span> + msg);<br/>    }<br/>}<br/><br/><span class="hl-keyword">function</span> ConnectToServerWithProxy() {<br/>    <a href="Network-useProxy.html" class="itemlink">Network.useProxy</a> = true;<br/>    <a href="Network.Connect.html" class="itemlink">Network.Connect</a>(serverIP, serverPort);<br/>}<br/><br/><span class="hl-keyword">function</span> OnConnectedToServer() {<br/>    <a href="Debug.Log.html?from=Network" class="itemlink">Debug.Log</a>(<span class="hl-string">"Connected successfully to server"</span>);<br/>}<br/><p class="details"></div>
<div class="code" code_lang_name="C#">using UnityEngine;<br/>using System.Collections;<br/><br/><span class="hl-keyword">public</span> <span class="hl-keyword">class</span> example : <a href="MonoBehaviour.html" class="classlink">MonoBehaviour</a> {<br/>    <span class="hl-keyword">public</span> <span class="hl-datatype">bool</span> imaserver;<br/>    <span class="hl-keyword">public</span> <span class="hl-datatype">string</span> serverIP;<br/>    <span class="hl-keyword">public</span> <span class="hl-datatype">int</span> serverPort;<br/>    <span class="hl-keyword">public</span> <span class="hl-datatype">bool</span> serverUsesNAT;<br/>    <span class="hl-keyword">void</span> <span class="hl-operator">Awake</span>() {<br/>        <a href="Network-proxyIP.html" class="itemlink">Network.proxyIP</a> = <span class="hl-string">"1.1.1.1"</span>;<br/>        <a href="Network-proxyPort.html" class="itemlink">Network.proxyPort</a> = 1111;<br/>        <span class="hl-keyword">if</span> (imaserver)<br/>            StartServerWithProxy();<br/>        <span class="hl-keyword">else</span><br/>            ConnectToServerWithProxy();<br/>    }<br/>    <span class="hl-keyword">void</span> StartServerWithProxy() {<br/>        <a href="Network-useProxy.html" class="itemlink">Network.useProxy</a> = true;<br/>        <a href="Network.InitializeServer.html" class="itemlink">Network.InitializeServer</a>(2, 25000, <span class="hl-keyword">false</span>);<br/>    }<br/>    <span class="hl-keyword">void</span> OnServerInitialized(<a href="NetworkPlayer.html" class="classlink">NetworkPlayer</a> player) {<br/>        <span class="hl-keyword">if</span> (<a href="Network-useProxy.html" class="itemlink">Network.useProxy</a>)<br/>            <a href="Debug.Log.html?from=Network" class="itemlink">Debug.Log</a>(<span class="hl-string">"Successfully started server with proxy support. We are connectable through "</span> + player.ipAddress + <span class="hl-string">":"</span> + player.port);<br/>        <br/>    }<br/>    <span class="hl-keyword">void</span> OnFailedToConnect(<a href="NetworkConnectionError.html" class="classlink">NetworkConnectionError</a> msg) {<br/>        <span class="hl-keyword">if</span> (<a href="Network-useProxy.html" class="itemlink">Network.useProxy</a> &amp;&amp; imaserver)<br/>            <a href="Debug.LogError.html?from=Network" class="itemlink">Debug.LogError</a>(<span class="hl-string">"Failed to connect to proxy server: "</span> + msg);<br/>        <br/>    }<br/>    <span class="hl-keyword">void</span> ConnectToServerWithProxy() {<br/>        <a href="Network-useProxy.html" class="itemlink">Network.useProxy</a> = true;<br/>        <a href="Network.Connect.html" class="itemlink">Network.Connect</a>(serverIP, serverPort);<br/>    }<br/>    <span class="hl-keyword">void</span> OnConnectedToServer() {<br/>        <a href="Debug.Log.html?from=Network" class="itemlink">Debug.Log</a>(<span class="hl-string">"Connected successfully to server"</span>);<br/>    }<br/>}<br/><p class="details"></div>
<div class="code" code_lang_name="Boo"><span class="hl-keyword">import</span> UnityEngine<br/><span class="hl-keyword">import</span> System.Collections<br/><br/><span class="hl-keyword">class</span> example(<a href="MonoBehaviour.html" class="classlink">MonoBehaviour</a>):<br/><br/>    <span class="hl-keyword">public</span> imaserver as <span class="hl-datatype">bool</span><br/><br/>    <span class="hl-keyword">public</span> serverIP as <span class="hl-datatype">string</span><br/><br/>    <span class="hl-keyword">public</span> serverPort as <span class="hl-datatype">int</span><br/><br/>    <span class="hl-keyword">public</span> serverUsesNAT as <span class="hl-datatype">bool</span><br/><br/>    def <span class="hl-operator">Awake</span>():<br/>        <a href="Network-proxyIP.html" class="itemlink">Network.proxyIP</a> = '1.1.1.1'<br/>        <a href="Network-proxyPort.html" class="itemlink">Network.proxyPort</a> = 1111<br/>        <span class="hl-keyword">if</span> imaserver:<br/>            StartServerWithProxy()<br/>        <span class="hl-keyword">else</span>:<br/>            ConnectToServerWithProxy()<br/><br/>    def StartServerWithProxy():<br/>        <a href="Network-useProxy.html" class="itemlink">Network.useProxy</a> = true<br/>        <a href="Network.InitializeServer.html" class="itemlink">Network.InitializeServer</a>(2, 25000, <span class="hl-keyword">false</span>)<br/><br/>    def OnServerInitialized(player as <a href="NetworkPlayer.html" class="classlink">NetworkPlayer</a>):<br/>        <span class="hl-keyword">if</span> <a href="Network-useProxy.html" class="itemlink">Network.useProxy</a>:<br/>            <a href="Debug.Log.html?from=Network" class="itemlink">Debug.Log</a>(((('Successfully started server <span class="hl-keyword">with</span> proxy support. We are connectable through ' + player.ipAddress) + ':') + player.port))<br/><br/>    def OnFailedToConnect(msg as <a href="NetworkConnectionError.html" class="classlink">NetworkConnectionError</a>):<br/>        <span class="hl-keyword">if</span> <a href="Network-useProxy.html" class="itemlink">Network.useProxy</a> and imaserver:<br/>            <a href="Debug.LogError.html?from=Network" class="itemlink">Debug.LogError</a>(('Failed to connect to proxy server: ' + msg))<br/><br/>    def ConnectToServerWithProxy():<br/>        <a href="Network-useProxy.html" class="itemlink">Network.useProxy</a> = true<br/>        <a href="Network.Connect.html" class="itemlink">Network.Connect</a>(serverIP, serverPort)<br/><br/>    def OnConnectedToServer():<br/>        <a href="Debug.Log.html?from=Network" class="itemlink">Debug.Log</a>('Connected successfully to server')<br/><p class="details"></div>
</div></p>
<div class="entry-sep"></div>
</div>	
	</div><!-- #TemplateEndEditable -->
    <script type="text/javascript">

    //prevent an error on older versions of IE(x) < IE7 who did not have a javascript console.
    if (typeof console == "undefined" || typeof console.log == "undefined") var console = { log: function() {} };


    var $j = jQuery.noConflict();
    $j(document).ready(function($){

    	var languages = [];
    	function getCookie(cookieName){
    //a wrapper, because google chrome does not allow for security reasons cookies on local files.
    //an option can be set while loading chrome to allow cookies on local files
    		try {
    			return $.cookie(cookieName);
    		}catch(e){
    			console.log(e);
    		}
    	}

    	function setCookie(cookieName, cookieValue){
    //a wrapper, because google chrome does not allow for security reasons cookies on local files.
    //an option can be set while loading chrome to allow cookies on local files
    		try{
    			return $.cookie(cookieName, cookieValue);
    		}catch(e){
    			console.log(e);
    		}
    	}
    
    /*
    decectLangauges looks at all of the div(s) containing a class of "code"
    it then creates a list of languages in that list to generate the drop down.
    to ad a language, ad an example with that language defined 
    in the attribute "code_lang_name" for that div
    */
    	function detectLanguages(){
    		languages = [];
    		$("div.code").each(
    			function(){
    				var isThere = false;
    //set the value of the attribute
    				var isNewLang = $(this).attr("code_lang_name");
    				for ( i in languages ){
    					if( isNewLang == languages[i] ){
    						isThere = true;
    					}
    				}				
    				if( !isThere ){
    //adds a new language to the stack/ array
    				   languages.push(isNewLang);
    				}
    			});
    		console.log("languages detected", languages);
    	}
    
    //execute the function detectLanguages just after we defined it, this should only happen once and on page load after the document object model is ready
    	detectLanguages();

    	function buildListCSelect(){
    //finds the doc element with an id of selectedLangauge, base on css3 rules, then removes all children
    		$(".cSelect ul").empty();
    		$(".cSelect .cSelect-Selected").text("");
    		var langCookie = getCookie("codeLanguage");		
    		for( i in languages ){
    //inserts a new child with the included html
    			$(".cSelect ul").append("<li>" + languages[i] + "</li>");
    		}
    
    //if the cookie is there, set that item to selected.
    		for( i in languages ){
    			if(langCookie !== null && languages[i] == langCookie){
    				$(".cSelect .cSelect-Selected").text(languages[i]);
    			}
    		}

    		if( $(".cSelect .cSelect-Selected").text().length == 0){
    			var first = $(".cSelect li:first").text();
    			$(".cSelect .cSelect-Selected").text(first);
    		}

    	}
    	buildListCSelect();
    
    	function showCSelectedLanguage(){
    		var selected = $(".cSelect .cSelect-Selected:first").text();
    		var langAvail = false;
    		var langCookie = getCookie("codeLanguage");
    		for( i in languages ){
    			if(langCookie == languages[i]){
    				langAvail = true;
    			}
    		}
    		if(langAvail) {
    			selected = langCookie;
    		} else {
    			console.log("the language stored in the cookie is not availible", langCookie);
    		}
    		$("div.code[code_lang_name]").hide();
    		$("div.code[code_lang_name='"+ selected +"']").show();
    	}
    	showCSelectedLanguage(); //set the default.
           $(".cSelect").addClass("roundBottom");
    	$(".cSelect ul").hide();
    /* 	$(".cSelect").hover(
     		function(){
     			$(this).find("ul").show();
     		},
     		function(){
     			$(this).find("ul").hide();
     		}
     	);
*/
    	$(".cSelect").hover(
    		function(){
    			$(document).unbind("click.cSelect");
    		},
    		function(){
    			$(document).bind("click.cSelect", function(event){
                                   $(".cSelect").addClass("roundBottom");
    				$(".cSelect ul").hide();
    				$(this).unbind(event);
    			});
    		}
    	);


    	$(".cSelect li").hover(
    		function(){
    			$(this).addClass("cSelect-highlight");
    		},
    		function(){
    			$(this).removeClass("cSelect-highlight");
    		}
    	);

    	var suppress = false;
    	function enable(){
    		suppress = false;
    	}


    	$(".cSelect li").click(function(){
    		var value = $(this).text();
    		console.log( "new selection ", value );
    		$(this).parents(".cSelect").find(".cSelect-Selected").text(value);
    		suppress = true;
                   $(".cSelect").addClass("roundBottom");
    		$(".cSelect ul").hide();
    		$(this).parents(".cSelect").trigger("change");
    		setTimeout(enable, 300 );
    	});


           $(".cSelect-ArrowDown")
     		.add(".cSelect-Selected")
     		.add(".cSelect").click(
     		function(){
     			var visible = $(this).parents(".cSelect").find("ul").css("display") == "block" ? true : false;
     			if( !visible ){
     				$(this).parents(".cSelect").removeClass("roundBottom");
     				$(this).parents(".cSelect").find("ul").show();
     			}else{
     				$(this).parents(".cSelect").addClass("roundBottom");
     				$(".cSelect ul").hide();
     			}
     		});


    	$(".cSelect").click(function(){if(!suppress){}});
 
    	$(".cSelect").change(function(){
    		console.log("selected",$(this).find(".cSelect-Selected").text());
    		selected = $(this).find(".cSelect-Selected").text();
    		$(".cSelect").find(".cSelect-Selected").text(selected);
    		$("div.code[code_lang_name]").hide();
    		$("div.code[code_lang_name='"+ selected +"']").show();
    		setCookie("codeLanguage", selected);
    	});
    });
    </script>
</body>
</html><!-- #EndTemplate -->

